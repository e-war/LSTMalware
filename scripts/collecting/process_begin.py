import os
# BEGIN PROCESS BY READING THE TODO LIST
with open('/home/elliot/Documents/Work/uni/final_proj/LSTMalware/collecting/scripts/test.txt','r+') as todo_list:
    todo_processes = todo_list.readlines()
    todo_list.seek(0)
    # REMOVE THE PROCESS LINE FROM TODO LIST
    working_process = todo_processes.pop(0)
    todo_list.writelines(todo_processes)
    todo_list.truncate()
    todo_list.close()


# START PROCMON WITH LOGSTREAM > SMB SHARE AS PROCESSNAME.CSV
os.system('cmd /c procmon /Runtime 30 /BackingFile "\\\\192.168.1.50\\public\\uni\\"'+working_process )


# WRITE PROCESS NAME TO BEGUN_PROCESS_LIST.TXT
with open('','a') as performed_process:
    performed_process.write(working_process+'\n')
    performed_process.close()

# BEGIN PROCESS
os.system('cmd /c "\\\\192.168.1.50\\public\\uni\\malicious-samples\\"'+working_process)
